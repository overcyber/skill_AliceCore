<!--
	This is almost a copy of the official Nore-red MQTT out node found on node-red repository.
	It's been fitted to our needs of simplicity for everyday use and repackaged
-->


<script type="text/javascript">
	RED.nodes.registerType('triggerAction', {
		category: 'Project Alice',
		color: '#3FADB5',
		defaults: {
			broker: {
				type: 'aliceMqtt',
				required: true
			},
			triggerAction: {
				value: '',
				required: false
			},
			client: {
				value: ''
			}
		},
		inputs: 1,
		outputs: 0,
		icon: 'bridge.svg',
		label: function () {
			return this.name;
		}
	})
</script>

<script type="text/html" data-help-name="triggerAction">
	<p>
		Triggers an intent from Within Alice
	</p>
	<h3>Inputs</h3>
	<dl class="message-properties">
		<dt>MQTT
			<span class="property-type">Configured Settings</span>
		</dt>
		<dd> This is the MQTT client that will be used.</dd>
		<dt>triggerAction
			<span class="property-type">string</span>
		</dt>
		<dd> This is the message you want Alice to action. Example: good night</dd>
		<dt class="optional">Device UID <span class="property-type">string</span></dt>
		<dd> The UID of the device you want to speak.</dd>
	</dl>

	<h3>Details</h3>
	<p><b>MQTT Broker</b> - The MQTT broker should already be set by default. If you see AliceMqtt as the server
		name then this is probably setup correctly and no further action is needed by you.</p>
	<p><b>Message</b> - You have two options with the Message field</p>
	<ol>
		<li>Enter the message in this field that you want sent to Alice <b>EG:</b><code>what's the time</code>
			*NOTE* Having text in this field will override any incoming payload
		</li>
		<li>Inject the message using <code>msg.payload.message</code>. This will give you the extra benifit of
			sending, for example, random messages. Or able to use the node once in a flow but recieve the message from
			various sources
		</li>
		.
	</ol>

	<p><b>Device UID</b> - The Device ID is not a required field. It is the Unique ID of the device you want to have
		action your message. Leaving this field blank will use the default Alice device </p>


</script>

<script type="text/html" data-template-name="triggerAction">
	<div class="form-row">
		<label for="node-input-broker"><i class="fa fa-bookmark fa-fw"></i> <span
				data-i18n="triggerAction.broker">Broker</span></label>
		<input type="text" id="node-input-broker">
	</div>
	<div class="form-row">
		<div class="form-row">
			<label for="node-input-triggerAction"><i class="fa fa-tasks fa-fw"></i> <span
					data-i18n="triggerAction.triggerAction">Message</span></label>
			<input type="text" id="node-input-triggerAction">
		</div>
	</div>
	<div class="form-row">
		<div class="form-row">
			<label for="node-input-client"><i class="fa fa-map-marker fa-fw"></i> <span
					data-i18n="triggerAction.client">Device UID</span></label>
			<input type="text" id="node-input-client">
		</div>
	</div>
</script>
